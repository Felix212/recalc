HA$PBExportHeader$f_sequence_ll.srf
$PBExportComments$Autoincrement f$$HEX1$$fc00$$ENDHEX$$r Oracle
global type f_sequence_ll from function_object
end type

forward prototypes
global function longlong f_sequence_ll (string ssequencename, transaction ttrans)
end prototypes

global function longlong f_sequence_ll (string ssequencename, transaction ttrans);// --------------------------------------------------------------------------------------------------------------------
// Objekt : f_sequence_ll
// Methode:  (Event)
// Autor  : Heiko Rothenbach
// --------------------------------------------------------------------------------------------------------------------
// Argument(e):
// none
// --------------------------------------------------------------------------------------------------------------------
// Return: longlong		Sequence bis 9223372036854775807 (LONGLONG) bzw. 999999999999 (Number(12))
// --------------------------------------------------------------------------------------------------------------------
//  Beschreibung:  F_SEQUENCE Funktion mit dem R$$HEX1$$fc00$$ENDHEX$$ckgabewert in LONGLONG
//
//
// --------------------------------------------------------------------------------------------------------------------
//  Modifikationen:
//  Datum       Version  Autor          Kommentar
// --------------------------------------------------------------------------------------------------------------------
//  25.02.2013	   1.0      H.Rothenbach   Erstellung
//
// --------------------------------------------------------------------------------------------------------------------
// ------------------------
// Autoincrement f$$HEX1$$fc00$$ENDHEX$$r Oracle
// ------------------------
	longlong					llNextID
	string 					sSQL
	DynamicStagingArea	dsaSQLSA
	
	
	dsaSQLSA = Create DynamicStagingArea
	
	// ein wenig Dynamic SQL
	
	DECLARE cur_AutoInc DYNAMIC CURSOR FOR dsaSQLSA ;
		
	sSQL =  "Select " + sSequenceName + ".nextval from dual"
	
	PREPARE dsaSQLSA FROM :sSQL USING ttrans ;
	
	OPEN DYNAMIC cur_AutoInc ;

	
	If tTrans.SQLCODE <> 0 Then
		llNextID = -1
	else
		FETCH cur_AutoInc INTO :llNextID ;
		
	End if	
	
	CLOSE 	cur_AutoInc ;
	Destroy 	dsaSQLSA
	return llNextId
	
	











end function

